<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.TalentManagement">
	<select id="selectRank" resultType="map">
		select * from rank
	</select>
	
	<select id="selectPosition" resultType="map">
		select * from position
	</select>
	
	<select id="selectEmpType" resultType="map">
		select * from EMP_TYPE
	</select>
	
	<select id="selectSectors" resultType="map">
		select * from sectors
	</select>
	
	<select id="selectArea" resultType="map">
		select * from area
	</select>
	
	<select id="selectEducation" resultType="map">
		select * from major
	</select>
	
	<select id="selectOccupation" resultType="map">
		select * from occupation
	</select>
	
	<select id="selectResume" parameterType="TalentManagementVO" resultType="map">
		select * from(
		
		select rownum as RNUM, blist.* from (
		
		select * from totalresume
		
		<trim prefix="where" prefixOverrides="AND |OR">
		
			<if test="areaTopName != null">
				AREA_TOP_NAME in
				<foreach collection="areaTopName" item="Name" 
					index="index" open="(" close=")" separator=",">
					#{Name}
				</foreach>
				
			</if>
			
			<if test="areaName != null">
				AND AREA_NAME in
				<foreach collection="areaName" item="area" 
					index="index" open="(" close=")" separator=",">
					#{area}
				</foreach>
			</if>
			
			<if test="etName != null">
				AND ET_NAME in
				<foreach collection="etName" item="etname" 
					index="index" open="(" close=")" separator=",">
					#{etname}
				</foreach>
			</if>
			
			<if test="occuName != null">
				AND OCCU_NAME in
				<foreach collection="occuName" item="occuname" 
					index="index" open="(" close=")" separator=",">
					#{occuname}
				</foreach>
			</if>
			
			<if test="secName != null">
				AND SEC_NAME in
				<foreach collection="secName" item="secname" 
					index="index" open="(" close=")" separator=",">
					#{secname}
				</foreach>
			</if>
			
			<if test="resumeGender != null">
				AND RESUME_GENDER in
				<foreach collection="resumeGender" item="resumeGender" 
					index="index" open="(" close=")" separator=",">
					#{resumeGender}
				</foreach>
			</if>
			<if test="universityType != null">
				AND EDU_NAME in
				<foreach collection="universityType" item="universityType" 
					index="index" open="(" close=")" separator=",">
					#{universityType}
				</foreach>
			</if>
		</trim>
		) blist
		)
			<![CDATA[
			where RNUM > #{currentPage} and RNUM<=#{currentPage}+#{countPerPage}]]>		
	</select>
</mapper>








